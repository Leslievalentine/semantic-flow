# ğŸŒŠ Semantic Flow

> **AI é©±åŠ¨çš„è‹±è¯­å†™ä½œè®­ç»ƒåº”ç”¨** â€” ç”¨è¯­ä¹‰é—´éš”æ³•æå‡ä½ çš„åœ°é“è¡¨è¾¾

[![Live Demo](https://img.shields.io/badge/Demo-semantic--flow.vercel.app-blue)](https://semantic-flow.vercel.app)
[![MIT License](https://img.shields.io/badge/License-MIT-green.svg)](https://choosealicense.com/licenses/mit/)
[![Next.js](https://img.shields.io/badge/Next.js-16-black)](https://nextjs.org/)
[![Supabase](https://img.shields.io/badge/Supabase-PostgreSQL-3ECF8E)](https://supabase.com/)
[![DeepSeek](https://img.shields.io/badge/AI-DeepSeek%20V3-blue)](https://deepseek.com/)

---

## ğŸ†• v2.1 æ›´æ–°æ—¥å¿— (2025-01-30)

### ğŸ§  Knowledge Vault (çŸ¥è¯†åº“)
å…¨æ–°çš„"å…ƒè®¤çŸ¥ä¸­å¿ƒ"ï¼Œå¸®åŠ©ç”¨æˆ·ä»"åšé¢˜"å‡çº§ä¸º"å¤ç›˜+ç§¯ç´¯"ï¼š

- **æ‰“å¡å…‰ç¯ (Streak Ring)** â€” ä¾§è¾¹æ åœ†ç¯è¿›åº¦æ¡ï¼Œæ˜¾ç¤ºä»Šæ—¥ç»ƒä¹ è¿›åº¦å’Œè¿ç»­æ‰“å¡å¤©æ•°
- **ä¸‰è‰²ä»ªè¡¨ç›˜** â€” çº¢/é»„/ç»¿çŠ¶æ€å¡ç‰‡å±•ç¤ºæŒæ¡ç¨‹åº¦åˆ†å¸ƒ
  - ğŸ”´ Critical Gaps (éœ€æ”»å…‹) â€” å¾—åˆ† < 5
  - ğŸŸ¡ Refining (è¿›é˜¶ä¸­) â€” å¾—åˆ† 5-7.9  
  - ğŸŸ¢ Mastered (å·²æŒæ¡) â€” å¾—åˆ† â‰¥ 8
- **è¯é¢˜æŠ˜å æµ** â€” æŒ‰ Deck åˆ†ç»„çš„å¡ç‰‡åˆ—è¡¨ï¼Œå±•å¼€æŸ¥çœ‹è¯¦æƒ…
- **é™æ€è¯¦æƒ…é¡µ** â€” æŸ¥çœ‹ä¸Šæ¬¡è¾“å…¥ã€AI åé¦ˆï¼Œä¸€é”®å¼ºåˆ¶å¤ä¹ 

### ğŸ¯ AI æç¤ºè¯ä¼˜åŒ–
- å›å½’ **B2-C1 Native Precision** é£æ ¼
- ä¸¥æ ¼è¯é¢˜ç›¸å…³æ€§çº¦æŸ
- æä¾› Natural/Formal åŒè¯‘æ–‡å‚è€ƒ

### ğŸ”§ Bug ä¿®å¤
- ä¿®å¤ RLS è®¤è¯é—®é¢˜å¯¼è‡´çš„ 401/500 é”™è¯¯
- ä¿®å¤ `last_score` å°æ•°å­˜å‚¨é—®é¢˜
- ä¼˜åŒ–è¯„ä¼° API é”™è¯¯å¤„ç†

---

## âœ¨ æ ¸å¿ƒç†å¿µ

**"å…ˆç¿»è¯‘ï¼Œå†å¯¹ç…§ï¼Œå·®è·å³æˆé•¿"**

1. ğŸ“ çœ‹åˆ°ä¸­æ–‡æ¦‚å¿µï¼Œç”¨è‹±è¯­è¡¨è¾¾ä½ çš„ç¿»è¯‘
2. ğŸ¤– AI å®æ—¶è¯„ä¼°ï¼ŒæŒ‡å‡ºä¸åœ°é“è¡¨è¾¾çš„å·®è·
3. ğŸ¯ å¯¹æ¯” Native å‚è€ƒå¥ï¼Œå¼ºåŒ–è®°å¿†
4. ğŸ”„ è¯­ä¹‰é—´éš”å¤ä¹ ï¼Œè®©è¡¨è¾¾çœŸæ­£å†…åŒ–

---

## ğŸš€ åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
| åŠŸèƒ½ | æè¿° |
|------|------|
| ğŸ´ **AI ç”Ÿæˆå¡ç‰‡** | è¾“å…¥ä»»æ„ä¸»é¢˜ï¼ŒDeepSeek V3 è‡ªåŠ¨ç”Ÿæˆè®­ç»ƒå¡ç‰‡ |
| ğŸ“¤ **ä¸Šä¼ è‡ªå®šä¹‰å¡ç‰‡** | æ”¯æŒæ‰‹åŠ¨æ·»åŠ ä¸­è‹±å¯¹ç…§å†…å®¹ |
| ğŸ”€ **æ™ºèƒ½åˆå¹¶** | ç›¸ä¼¼ä¸»é¢˜è‡ªåŠ¨åˆå¹¶ (Jaccard 80%+ åŒ¹é…) |
| ğŸ“Š **è¿›åº¦è¿½è¸ª** | æ¯æ—¥ç»ƒä¹ ç»Ÿè®¡ + å¡ç‰‡è¿›åº¦è®°å¿† |
| ğŸ§  **Knowledge Vault** | çŸ¥è¯†åº“ä»ªè¡¨ç›˜ï¼ŒæŒæ¡ç¨‹åº¦å¯è§†åŒ– |
| â†•ï¸ **æ‹–æ‹½æ’åº** | è‡ªç”±è°ƒæ•´ Deck é¡ºåº |
| ğŸ’¾ **çŠ¶æ€æŒä¹…åŒ–** | ç»ƒä¹ çŠ¶æ€è‡ªåŠ¨ä¿å­˜ï¼Œåˆ·æ–°ä¸ä¸¢å¤± |

### UI ç‰¹è‰²
- ğŸ“° **ç»æµå­¦äººé£æ ¼** â€” è¡¬çº¿å­—ä½“ + ç±³ç™½èƒŒæ™¯ï¼Œæ²‰æµ¸å¼é˜…è¯»ä½“éªŒ
- ğŸ”¥ **æ‰“å¡å…‰ç¯** â€” åœ†ç¯è¿›åº¦æ¡ + è¿ç»­å¤©æ•°æ˜¾ç¤º
- ğŸšï¸ **æ°´å¹³è¿›åº¦æ¡** + é¡µç è·³è½¬
- ğŸ”„ **Refresh æŒ‰é’®** â€” æ”¯æŒé‡æ–°ç»ƒä¹ å•å¼ å¡ç‰‡
- ğŸ“± **ä¾§è¾¹æ æŠ˜å ** â€” æ›´å¤§çš„ç»ƒä¹ ç©ºé—´

---

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

```
Frontend:   Next.js 16 + TypeScript + Tailwind CSS + Shadcn/UI
Backend:    Supabase (PostgreSQL + RLS)
AI:         DeepSeek V3 (via OpenAI-compatible API)
DnD:        @dnd-kit/core + @dnd-kit/sortable
Auth:       Supabase Auth + @supabase/ssr
```

---

## ğŸ“¦ å¿«é€Ÿå¼€å§‹

### 1. å…‹éš†é¡¹ç›®
```bash
git clone https://github.com/Leslievalentine/semantic-flow.git
cd semantic-flow
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡
åˆ›å»º `.env.local` æ–‡ä»¶ï¼š
```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_anon_key

# DeepSeek API (OpenAI å…¼å®¹æ¨¡å¼)
OPENAI_API_KEY=your_deepseek_api_key
OPENAI_BASE_URL=https://api.deepseek.com
```

### 3. åˆå§‹åŒ–æ•°æ®åº“
åœ¨ Supabase SQL Editor ä¸­æŒ‰é¡ºåºæ‰§è¡Œï¼š
1. `supabase/schema-v2.sql` â€” åˆ›å»ºè¡¨ç»“æ„ + RLS ç­–ç•¥
2. `supabase/memory-engine-migration.sql` â€” æ·»åŠ è®°å¿†å¼•æ“å­—æ®µ
3. `supabase/vault-migration.sql` â€” æ·»åŠ çŸ¥è¯†åº“å­—æ®µ
4. `supabase/fix-score-type.sql` â€” ä¿®å¤åˆ†æ•°ç±»å‹

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```
è®¿é—® http://localhost:3000 ğŸ‰

---

## ğŸŒ éƒ¨ç½²æŒ‡å—

### Vercel éƒ¨ç½² (æ¨è)

1. **è¿æ¥ GitHub ä»“åº“**
   - åœ¨ [vercel.com](https://vercel.com) å¯¼å…¥é¡¹ç›®

2. **é…ç½®ç¯å¢ƒå˜é‡**
   - `NEXT_PUBLIC_SUPABASE_URL`
   - `NEXT_PUBLIC_SUPABASE_ANON_KEY`
   - `OPENAI_API_KEY`
   - `OPENAI_BASE_URL`

3. **éƒ¨ç½²**
   - Vercel ä¼šè‡ªåŠ¨æ„å»ºå’Œéƒ¨ç½²

### Supabase é…ç½®
ç¡®ä¿åœ¨ Supabase Dashboard â†’ Authentication â†’ URL Configuration ä¸­ï¼š
- Site URL: ä½ çš„ç”Ÿäº§ç¯å¢ƒ URL
- Redirect URLs: æ·»åŠ  `https://your-domain.com/auth/callback`

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
semantic-flow/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                 # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/             # API è·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ decks/       # Deck CRUD
â”‚   â”‚   â”‚   â”œâ”€â”€ cards/       # Card ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ vault/       # çŸ¥è¯†åº“ API
â”‚   â”‚   â”‚   â”œâ”€â”€ evaluate/    # AI è¯„ä¼°
â”‚   â”‚   â”‚   â””â”€â”€ generate-deck/ # AI ç”Ÿæˆ
â”‚   â”‚   â”œâ”€â”€ vault/           # çŸ¥è¯†åº“é¡µé¢
â”‚   â”‚   â””â”€â”€ page.tsx         # ä¸»é¡µé¢
â”‚   â”œâ”€â”€ components/          # UI ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Flashcard.tsx    # å¡ç‰‡æ ¸å¿ƒç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Sidebar.tsx      # ä¾§è¾¹æ  (å«æ‹–æ‹½)
â”‚   â”‚   â”œâ”€â”€ StreakRing.tsx   # æ‰“å¡å…‰ç¯
â”‚   â”‚   â”œâ”€â”€ StatusCard.tsx   # çŠ¶æ€å¡ç‰‡
â”‚   â”‚   â””â”€â”€ TopicAccordion.tsx # è¯é¢˜æŠ˜å 
â”‚   â””â”€â”€ lib/                 # å·¥å…·åº“
â”‚       â”œâ”€â”€ supabase.ts      # æµè§ˆå™¨å®¢æˆ·ç«¯
â”‚       â”œâ”€â”€ server-auth.ts   # æœåŠ¡ç«¯è®¤è¯
â”‚       â””â”€â”€ ai.ts            # AI æ¥å£
â”œâ”€â”€ supabase/
â”‚   â”œâ”€â”€ schema-v2.sql        # æ•°æ®åº“æ¶æ„
â”‚   â”œâ”€â”€ memory-engine-migration.sql
â”‚   â”œâ”€â”€ vault-migration.sql
â”‚   â””â”€â”€ fix-score-type.sql
â””â”€â”€ README.md
```

---

## ğŸ¯ ä½¿ç”¨æŒ‡å—

### åˆ›å»ºæ–° Deck
1. ç‚¹å‡»ä¾§è¾¹æ  **+** æŒ‰é’®
2. é€‰æ‹© **AI Generate New Deck**
3. è¾“å…¥ä¸»é¢˜ï¼ˆå¦‚ "Climate Change"ï¼‰
4. AI è‡ªåŠ¨ç”Ÿæˆ 5 å¼ è®­ç»ƒå¡ç‰‡

### ç»ƒä¹ æµç¨‹
1. é€‰æ‹© Deck â†’ ç‚¹å‡» **Begin Translation**
2. è¾“å…¥ä½ çš„è‹±æ–‡ç¿»è¯‘ â†’ ç‚¹å‡» **Submit**
3. æŸ¥çœ‹ AI è¯„åˆ†å’Œæ”¹è¿›å»ºè®®
4. å¯¹æ¯” Native å‚è€ƒå¥
5. ç‚¹å‡» **Next Card** ç»§ç»­

### æŸ¥çœ‹çŸ¥è¯†åº“
1. ç‚¹å‡»ä¾§è¾¹æ  **Knowledge Vault**
2. æŸ¥çœ‹ä¸‰è‰²çŠ¶æ€å¡ç‰‡
3. ç‚¹å‡»ä»»æ„å¡ç‰‡è¿›å…¥åˆ†çº§åˆ—è¡¨
4. ç‚¹å‡»å¡ç‰‡æŸ¥çœ‹è¯¦æƒ…å’Œå†å²åé¦ˆ

---

## ğŸ“„ License

[MIT](LICENSE) Â© 2025 Leslie Valentine

---

<p align="center">
  <strong>Write with Native Precision</strong><br>
  <sub>ç”¨åœ°é“çš„æ–¹å¼ï¼Œè¡¨è¾¾æ¯ä¸€ä¸ªæƒ³æ³•</sub>
</p>
